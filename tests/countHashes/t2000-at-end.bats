#!/usr/bin/env bats

load fixture

@test "input without hashes is kept as-is" {
    run -0 countHashes <<-'EOF'
Just some text.
Nothing special.
EOF
    assert_output - <<'EOF'
Just some text.
Nothing special.
EOF
}

@test "input with one hash at the end counts as 1" {
    run -0 countHashes <<-'EOF'
This has #
Nothing here.
EOF
    assert_output - <<'EOF'
This has 1
Nothing here.
EOF
}

@test "count 1..9 hashes at the end" {
    run -0 countHashes <<-'EOF'
1 is #
2 is ##
3 is ###
4 is ####
5 is #####
6 is ######
7 is #######
8 is ########
9 is #########
EOF
    assert_output - <<'EOF'
1 is 1
2 is 2
3 is 3
4 is 4
5 is 5
6 is 6
7 is 7
8 is 8
9 is 9
EOF
}

@test "count tens hashes at the end" {
    run -0 countHashes <<-'EOF'
10 is ##########
11 is ###########
19 is ###################
20 is ####################
22 is ######################
40 is ########################################
90 is ##########################################################################################
98 is ##################################################################################################
99 is ###################################################################################################
EOF
    assert_output - <<'EOF'
10 is 10
11 is 11
19 is 19
20 is 20
22 is 22
40 is 40
90 is 90
98 is 98
99 is 99
EOF
}

@test "count hundreds hashes at the end" {
    run -0 countHashes <<-'EOF'
100 is ####################################################################################################
101 is #####################################################################################################
110 is ##############################################################################################################
111 is ###############################################################################################################
190 is ##############################################################################################################################################################################################
199 is #######################################################################################################################################################################################################
EOF
    assert_output - <<'EOF'
100 is 100
101 is 101
110 is 110
111 is 111
190 is 190
199 is 199
EOF
}

@test "count thousands hashes at the end" {
    run -0 countHashes <<-'EOF'
1000 is ########################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################
1001 is #########################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################
1010 is ##################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################
1011 is ###################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################
1100 is ############################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################
1101 is #############################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################
1110 is ######################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################
1111 is #######################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################
1234 is ##################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################
1999 is ###############################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################
EOF
    assert_output - <<'EOF'
1000 is 1000
1001 is 1001
1010 is 1010
1011 is 1011
1100 is 1100
1101 is 1101
1110 is 1110
1111 is 1111
1234 is 1234
1999 is 1999
EOF
}
