#!/bin/sh

readonly updateFile="$1"
readonly file="$2"

[ "$updateFile" ] || { echo >&2 "ERROR: Must pass inputfile used for the update."; exit 2; }
[ -r "$updateFile" ] || { echo >&2 "ERROR: inputfile \"${updateFile}\" does not exist."; exit 2; }
[ "$file" ] || { echo >&2 "ERROR: Must pass file to process."; exit 2; }

exec sed -i.bak -e "
\$a\\
# INCLUDED-CONTENT-BEGIN
\$r $updateFile
\$a\\
# INCLUDED-CONTENT-END
/^# INCLUDED-CONTENT-BEGIN\$/,/^# INCLUDED-CONTENT-END\$/d
" "$file"
